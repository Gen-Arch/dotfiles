[[plugins]]
repo        = 'Shougo/deoplete.nvim'
on_event    = 'InsertEnter'
build       = ':UpdateRemotePlugins'
hook_source = '''
  let g:deoplete#enable_at_startup = 1
'''

[[plugins]]
repo      = 'autozimu/LanguageClient-neovim'
on_source = ['deoplete.nvim']
build     = 'source install.sh'
hook_source = '''
  let g:LanguageClient_autoStart      = 1

  let g:LanguageClient_serverCommands = {
    \ 'ruby': ['solargraph', 'stdio'],
    \ 'vue':  ['vls'],
    \ 'typescript':  ['typescript-language-server', '--stdio'],
  \}

  nnoremap <silent> K :call LanguageClient#textDocument_hover()<CR>
  nnoremap <silent> gd :call LanguageClient#textDocument_definition()<CR>
  nnoremap <silent> <F2> :call LanguageClient#textDocument_rename()<CR>
'''
hook_post_source = '''
  call deoplete#custom#var('omni', 'input_patterns', {
    \ 'ruby': ['[^. *\t]\.\w*', '[a-zA-Z_]\w*::'],
  \})
'''

[[plugins]]
repo      = 'junegunn/fzf'
on_source = "LanguageClient-neovim"


# [ruby]--------------------------------------------
[[plugins]]
repo  = 'tpope/vim-endwise'
on_ft = ['ruby']

## knoowlage
# gem install solargraph
# yard gems
# yard config --gem-install-yri


# [vue]---------------------------------------------
#Vim syntax highlighting for Vue components.
[[plugins]]
repo  = 'posva/vim-vue'
on_ft = ['vue']
hook_post_source='''
let g:ft = ''
function! NERDCommenter_before()
  if &ft == 'vue'
    let g:ft = 'vue'
    let stack = synstack(line('.'), col('.'))
    if len(stack) > 0
      let syn = synIDattr((stack)[0], 'name')
      if len(syn) > 0
        exe 'setf ' . substitute(tolower(syn), '^vue_', '', '')
      endif
    endif
  endif
endfunction
function! NERDCommenter_after()
  if g:ft == 'vue'
    setf vue
    let g:ft = ''
  endif
endfunction
'''
# [typescript]--------------------------------------
[[plugins]]
repo  = 'leafgarland/typescript-vim'
on_ft = ['typescript']
